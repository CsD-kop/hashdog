"use strict";var _createClass=function(){function t(t,s){for(var e in s){var i=s[e];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,s)}return function(s,e,i){return e&&t(s.prototype,e),i&&t(s,i),s}}(),_get=function t(s,e,i){var a=Object.getOwnPropertyDescriptor(s,e);if(void 0===a){var r=Object.getPrototypeOf(s);return null===r?void 0:t(r,e,i)}if("value"in a&&a.writable)return a.value;var o=a.get;return void 0===o?void 0:o.call(i)},_inherits=function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s&&(t.__proto__=s)},_classCallCheck=function(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(exports,"__esModule",{value:!0});var BaseWorker=require("./BaseWorker").BaseWorker,Util=require("./../util/Util").Util,Permutator=exports.Permutator=function(t){function s(t){_classCallCheck(this,s),_get(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,t),this.permutations=0,this.lastPermutations=0,this.options={},this.currentMaxLength=0,this.data.name="<Bruteforce> Permutations",this.data.processId=process.pid,this.data.status="Initializing..."}return _inherits(s,t),_createClass(s,{initialize:{value:function(t){if(this.options=t,this.options.length){if(this.options.length>=16)return void console.log("Exceeded maximum key length!")}else this.options.length=2;this.permutations=0,this.lastPermutations=0,this.string="",this.data.keyLength=this.options.length,this.data.keysTotal=Math.pow(this.options.chars.length,this.options.length);for(var s=0;s<this.options.length;s++)this.string+=" ";this.permute(this.options.length)}},permute:{value:function(t){var s=void 0,e=void 0,i=void 0,a=void 0,r=void 0,o=void 0,n=void 0;if(0===t)parseInt(this.permutations)>=parseInt(this.data.keysTotal)-1&&(this.data.status="Unsuccessful",this.data.success=!1,this.data.uptime=process.uptime().toFixed(2),this.data.keysTried=this.permutations+1,this.data.percentage=100,this.data.string="",this.sendStatus(),process.send({command:"DONE",workerId:this.data.workerId})),e=this.hasher.hash(this.string),e===this.match&&(this.data.status="SUCCESS",this.data.success=!0,this.data.uptime=process.uptime(),this.data.keysTried=this.permutations,this.data.hash=e,this.data.string=this.string,this.sendStatus(),process.exit(0)),i=new Date,a=i-this.lastDate,a>=this.refreshRate&&(r=this.permutations-this.lastPermutations,o=(this.permutations/this.data.keysTotal*100).toFixed(2),n=r*(1e3/a),this.data.status="Working",this.data.success=!1,this.data.uptime=process.uptime().toFixed(2),this.data.keysTried=this.permutations,this.data.rate=n/1e3,this.data.percentage=o,this.data.string=this.string,this.sendStatus(),this.lastPermutations=this.permutations,this.lastDate=i),this.permutations++;else for(s=0;s<this.options.chars.length;s++)this.string=Util.replaceCharAtIndex(this.string,t-1,this.options.chars[s]),this.permute(t-1)}}}),s}(BaseWorker);